<!-- Need to use NVM 10.18.0-->
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title> Falcon Construction Database Page </title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <!-- Bootstrap 5.1.3 CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <!-- NEEDED FOR NAV BAR -->
    <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>

<body>
    <!--Navigation bar-->
    <div id="nav_bar"></div>
    <script>
        $(function () {
            $("#nav_bar").load("nav_bar.html");
        });
    </script>
    <!--End Navigation bar-->

    <!-- UPDATE JOB FORM -->
    <div class="container-fluid" style="margin-top:50px; margin-bottom: 50px;">
        <div class="card">
            {{#each job_to_update}}
            <div class="card-header font-weight-bold text-uppercase py-4" style="font-size: 30px">Update Job # {{this.job_id}}</div>
            <div class="card-body">
                <form id='update-job-form' onsubmit="event.preventDefault();">
                    <div class="form-row">
                        <input type="hidden" name="job_id" value="{{this.job_id}}"/>
                        <div class="col-md-4">
                                <label for="fk_customer_id"></label>
                                <input class="form-control" type="text" id="fk_customer_id" name="fk_customer_id" value="Customer: {{this.fk_customer_id}} - {{this.customer_name}}" disabled>
                        </div>
                        <div class="col-md-4">
                                <label for="fk_category_id"></label>
                                <input class="form-control" type="text" id="fk_category_id" name="fk_category_id" value="Category: {{this.fk_category_id}} - {{this.category_name}}" disabled>
                        </div>
                    </div>
                    <div class="form-row" style="margin-top:20px; margin-bottom: 20px;">
                        <div class="col-md-4">
                            <label for="job_code">Job Code: </label>
                            <input class="form-control" type="text" name="job_code_update" value="{{this.job_code}}" required>
                        </div>
                        <div class="col-md-8">
                            <label for="job_description">Job Description: </label>
                            <input class="form-control" type="text" name="job_description_update" value="{{this.job_description}}" required>
                        </div>
                    </div>
                    <div class="form-row" style="margin-top:20px; margin-bottom: 20px;">
                        <div class="col-md-4">
                            <label for="job_start_date">Job Start Date: </label>
                            <input class="form-control" type="date" id="job_start_date_update" name="job_start_date_update"
                                   min="2015-01-01" max="2030-01-01" value="{{this.job_start_date}}" required>
                        </div>
                        <div class="col-md-4">
                            <label for="job_end_date">Job End Date (optional): </label>
                            <input class="form-control" type="date" id="job_end_date_update" name="job_end_date_update"
                                   min="2015-01-01" max="2030-01-01" value="{{this.job_end_date}}">
                        </div>
                        <div class="col-md-4">
                            <label for="job_status">Job Status: </label>
                            <select class="form-control" id="job_status_update" name="job_status_update" required>
                                <option hidden disabled selected value="">Current Status: {{this.job_status}}</option>
                                {{/each}}
                                {{#each job_status}}
                                    <option>{{this}}</option>
                                {{/each}}
                            </select>
                        </div>
                    </div>
                    <div class="form-row text-center justify-content-center">
                        {{#each job_to_update}}
                        <button  type="submit" class="btn btn-dark btn-sm my-0" form="update-job-form" formmethod="post"
                                 formaction="/update-job" value="{{this.job_id}}">Submit Changes</button>
                        {{/each}}
                    </div>
                </form>
            </div>
        </div>
    </div>
</body>
</html>